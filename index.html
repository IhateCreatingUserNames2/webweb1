<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Formulário LLM</title>
</head>
<body>
  <h1>Formulário para Processamento de Dados</h1>
  <form id="llmForm" enctype="multipart/form-data">
    <label>Você possui energia no local?</label><br>
    <input type="checkbox" name="possuiEnergia" value="sim"> Sim<br>
    <input type="checkbox" name="possuiEnergia" value="nao"> Não<br><br>

    <div id="energiaNao" style="display: none;">
      <label>Quantidade de equipamentos elétricos:</label><br>
      <input type="number" name="equipamentos"><br><br>

      <label>Potência média dos equipamentos (kW):</label><br>
      <input type="number" name="potenciaMedia" step="0.1"><br><br>

      <label>Horas de utilização durante o dia:</label><br>
      <input type="number" name="horasDia"><br><br>

      <label>Horas de utilização durante a noite:</label><br>
      <input type="number" name="horasNoite"><br><br>
    </div>

    <div id="energiaSim" style="display: none;">
      <label>Consegue enviar sua fatura de energia?</label><br>
      <input type="file" name="faturaEnergia" accept="image/*,application/pdf"><br><br>
    </div>

    <label>Tipo de fixação dos módulos solares:</label><br>
    <select name="tipoFixacao" required>
      <option value="telhadoMetalico">Telhado Metálico</option>
      <option value="fixacaoSolo">Fixação em Solo</option>
      <option value="telhadoFibrocimento">Telhado Fibrocimento</option>
    </select><br><br>

    <label>Já possui módulos?</label><br>
    <input type="checkbox" name="possuiModulos" value="sim"> Sim<br>
    <input type="checkbox" name="possuiModulos" value="nao"> Não<br><br>

    <label>Qual a sua região?</label><br>
    <input type="text" name="regiao" required><br><br>

    <label>Qual o tempo máximo que você já ficou sem energia?</label><br>
    <input type="text" name="tempoSemEnergia" required><br><br>

    <button type="submit">Enviar</button>
  </form>

  <script>
    const energiaSim = document.getElementById('energiaSim');
    const energiaNao = document.getElementById('energiaNao');

    document.querySelectorAll('input[name="possuiEnergia"]').forEach(el => {
      el.addEventListener('change', (e) => {
        if (e.target.value === 'sim') {
          energiaSim.style.display = 'block';
          energiaNao.style.display = 'none';
        } else {
          energiaSim.style.display = 'none';
          energiaNao.style.display = 'block';
        }
      });
    });

    const form = document.getElementById('llmForm');
    form.addEventListener('submit', async (e) => {
      e.preventDefault();

      const formData = new FormData(form);

      const response = await fetch('/submit', {
        method: 'POST',
        body: formData
      });

      const result = await response.json();
      alert(result.mensagem);
    });
  </script>
</body>
</html>
